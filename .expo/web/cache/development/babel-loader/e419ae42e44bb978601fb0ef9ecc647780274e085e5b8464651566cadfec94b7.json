{"ast":null,"code":"import { useRef } from 'react';\nimport { useSharedValue } from \"./useSharedValue\";\nimport { getShadowNodeWrapperFromRef } from \"../fabricUtils\";\nimport { makeShareableCloneRecursive, registerShareableMapping } from \"../shareables\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport findNodeHandle from \"react-native-web/dist/exports/findNodeHandle\";\nfunction getComponentOrScrollable(component) {\n  if (global._IS_FABRIC && component.getNativeScrollRef) {\n    return component.getNativeScrollRef();\n  } else if (!global._IS_FABRIC && component.getScrollableNode) {\n    return component.getScrollableNode();\n  }\n  return component;\n}\nvar getTagValueFunction = global._IS_FABRIC ? getShadowNodeWrapperFromRef : findNodeHandle;\nexport function useAnimatedRef() {\n  var tag = useSharedValue(-1);\n  var viewName = useSharedValue(null);\n  var ref = useRef();\n  if (!ref.current) {\n    var fun = function fun(component) {\n      if (component) {\n        tag.value = getTagValueFunction(getComponentOrScrollable(component));\n        fun.current = component;\n        if (Platform.OS === 'ios' && !global._IS_FABRIC) {\n          var _component$viewConfig;\n          viewName.value = (component === null || component === void 0 ? void 0 : (_component$viewConfig = component.viewConfig) === null || _component$viewConfig === void 0 ? void 0 : _component$viewConfig.uiViewClassName) || 'RCTView';\n        }\n      }\n      return tag.value;\n    };\n    fun.current = null;\n    var remoteRef = makeShareableCloneRecursive({\n      __init: function __init() {\n        'worklet';\n\n        var f = function f() {\n          return tag.value;\n        };\n        f.viewName = viewName;\n        return f;\n      }\n    });\n    registerShareableMapping(fun, remoteRef);\n    ref.current = fun;\n  }\n  return ref.current;\n}","map":{"version":3,"sources":["C:\\Users\\Asus\\Desktop\\sirFrancis-main\\node_modules\\react-native-reanimated\\lib\\module\\reanimated2\\hook\\useAnimatedRef.ts"],"names":["useRef","useSharedValue","getShadowNodeWrapperFromRef","makeShareableCloneRecursive","registerShareableMapping","getComponentOrScrollable","component","global","_IS_FABRIC","getNativeScrollRef","getScrollableNode","getTagValueFunction","findNodeHandle","useAnimatedRef","tag","viewName","ref","current","fun","value","Platform","OS","viewConfig","uiViewClassName","remoteRef","__init","f"],"mappings":"AACA,SAASA,MAAM,QAAQ,OAAO;AAC9B,SAASC,cAAc;AAGvB,SAASC,2BAA2B;AACpC,SACEC,2BAA2B,EAC3BC,wBAAwB;AACJ,OAAA,QAAA;AAAA,OAAA,cAAA;AAatB,SAASC,wBAAwBA,CAACC,SAAmC,EAAE;EACrE,IAAIC,MAAM,CAACC,UAAU,IAAIF,SAAS,CAACG,kBAAkB,EAAE;IACrD,OAAOH,SAAS,CAACG,kBAAkB,CAAA,CAAE;EACvC,CAAC,MAAM,IAAI,CAACF,MAAM,CAACC,UAAU,IAAIF,SAAS,CAACI,iBAAiB,EAAE;IAC5D,OAAOJ,SAAS,CAACI,iBAAiB,CAAA,CAAE;EACtC;EACA,OAAOJ,SAAS;AAClB;AAEA,IAAMK,mBAAmB,GAAGJ,MAAM,CAACC,UAAU,GACzCN,2BAA2B,GAC3BU,cAAc;AAElB,OAAO,SAASC,cAAcA,CAAAA,EAEV;EAClB,IAAMC,GAAG,GAAGb,cAAc,CAAoC,CAAC,CAAC,CAAC;EACjE,IAAMc,QAAQ,GAAGd,cAAc,CAAgB,IAAI,CAAC;EAEpD,IAAMe,GAAG,GAAGhB,MAAM,CAAA,CAAkB;EAEpC,IAAI,CAACgB,GAAG,CAACC,OAAO,EAAE;IAChB,IAAMC,GAAmB,GAAqBZ,SAAxCY,GAAmB,CAAqBZ,SAAS,EAAK;MAE1D,IAAIA,SAAS,EAAE;QACbQ,GAAG,CAACK,KAAK,GAAGR,mBAAmB,CAACN,wBAAwB,CAACC,SAAS,CAAC,CAAC;QACpEY,GAAG,CAACD,OAAO,GAAGX,SAAS;QAEvB,IAAIc,QAAQ,CAACC,EAAE,KAAK,KAAK,IAAI,CAACd,MAAM,CAACC,UAAU,EAAE;UAAA,IAAA,qBAAA;UAC/CO,QAAQ,CAACI,KAAK,GAAG,CAAA,SAAS,KAAA,IAAA,IAAT,SAAS,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,qBAAA,GAAT,SAAS,CAAEG,UAAU,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAArB,qBAAA,CAAuBC,eAAe,KAAI,SAAS;QACtE;MACF;MACA,OAAOT,GAAG,CAACK,KAAK;IAClB,CAAE;IAEFD,GAAG,CAACD,OAAO,GAAG,IAAI;IAElB,IAAMO,SAAS,GAAGrB,2BAA2B,CAAC;MAC5CsB,MAAM,EAAEA,SAAAA,OAAAA,EAAM;QACZ,SAAS;;QACT,IAAMC,CAAC,GAAGA,SAAJA,CAAC,CAAA;UAAA,OAASZ,GAAG,CAACK,KAAK;QAAA;QACzBO,CAAC,CAACX,QAAQ,GAAGA,QAAQ;QACrB,OAAOW,CAAC;MACV;IACF,CAAC,CAAC;IACFtB,wBAAwB,CAACc,GAAG,EAAEM,SAAS,CAAC;IACxCR,GAAG,CAACC,OAAO,GAAGC,GAAG;EACnB;EAEA,OAAOF,GAAG,CAACC,OAAO;AACpB","sourcesContent":["import type { Component } from 'react';\nimport { useRef } from 'react';\nimport { useSharedValue } from './useSharedValue';\nimport type { AnimatedRef } from './commonTypes';\nimport type { ShadowNodeWrapper } from '../commonTypes';\nimport { getShadowNodeWrapperFromRef } from '../fabricUtils';\nimport {\n  makeShareableCloneRecursive,\n  registerShareableMapping,\n} from '../shareables';\nimport { Platform, findNodeHandle } from 'react-native';\n\ninterface MaybeScrollableComponent extends Component {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  getNativeScrollRef?: any;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  getScrollableNode?: any;\n  viewConfig?: {\n    uiViewClassName?: string;\n  };\n}\n\nfunction getComponentOrScrollable(component: MaybeScrollableComponent) {\n  if (global._IS_FABRIC && component.getNativeScrollRef) {\n    return component.getNativeScrollRef();\n  } else if (!global._IS_FABRIC && component.getScrollableNode) {\n    return component.getScrollableNode();\n  }\n  return component;\n}\n\nconst getTagValueFunction = global._IS_FABRIC\n  ? getShadowNodeWrapperFromRef\n  : findNodeHandle;\n\nexport function useAnimatedRef<\n  T extends MaybeScrollableComponent\n>(): AnimatedRef<T> {\n  const tag = useSharedValue<number | ShadowNodeWrapper | null>(-1);\n  const viewName = useSharedValue<string | null>(null);\n\n  const ref = useRef<AnimatedRef<T>>();\n\n  if (!ref.current) {\n    const fun: AnimatedRef<T> = <AnimatedRef<T>>((component) => {\n      // enters when ref is set by attaching to a component\n      if (component) {\n        tag.value = getTagValueFunction(getComponentOrScrollable(component));\n        fun.current = component;\n        // viewName is required only on iOS with Paper\n        if (Platform.OS === 'ios' && !global._IS_FABRIC) {\n          viewName.value = component?.viewConfig?.uiViewClassName || 'RCTView';\n        }\n      }\n      return tag.value;\n    });\n\n    fun.current = null;\n\n    const remoteRef = makeShareableCloneRecursive({\n      __init: () => {\n        'worklet';\n        const f = () => tag.value;\n        f.viewName = viewName;\n        return f;\n      },\n    });\n    registerShareableMapping(fun, remoteRef);\n    ref.current = fun;\n  }\n\n  return ref.current;\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}