{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nimport ReanimatedModule from \"../ReanimatedModule\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nvar UPDATED_NODES = [];\nvar loopID = 1;\nvar propUpdatesEnqueued = null;\nvar nodeCount = 0;\nvar callID = \"\";\nexport function getCallID() {\n  return callID;\n}\nexport function setCallID(nextCallID) {\n  callID = nextCallID;\n}\nfunction sanitizeConfig(config) {\n  if (Platform.OS === 'web' || Platform.OS === 'windows' || Platform.OS === 'macos' || ['undefined', 'string', 'function', 'boolean', 'number'].includes(typeof config)) {\n    return config;\n  } else if (Array.isArray(config)) {\n    return config.map(sanitizeConfig);\n  } else if (config instanceof AnimatedNode) {\n    return config.__nodeID;\n  } else if (typeof config === 'object') {\n    var output = {};\n    for (var property in config) {\n      if (property in config) {\n        output[property] = sanitizeConfig(config[property]);\n      }\n    }\n    return output;\n  }\n  return config;\n}\nfunction runPropUpdates() {\n  var visitedNodes = new Set();\n  var findAndUpdateNodes = function findAndUpdateNodes(node) {\n    if (!node) {\n      console.warn('findAndUpdateNodes was passed a nullish node');\n      return;\n    }\n    if (visitedNodes.has(node)) {\n      return;\n    } else {\n      visitedNodes.add(node);\n    }\n    if (typeof node.update === 'function') {\n      node.update();\n    } else {\n      var nodes = node.__getChildren();\n      if (nodes) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          findAndUpdateNodes(nodes[i]);\n        }\n      }\n    }\n  };\n  for (var i = 0; i < UPDATED_NODES.length; i++) {\n    var node = UPDATED_NODES[i];\n    findAndUpdateNodes(node);\n  }\n  UPDATED_NODES.length = 0;\n  propUpdatesEnqueued = null;\n  loopID += 1;\n}\nvar scheduleUpdates = Platform.OS === 'web' ? requestAnimationFrame : setImmediate;\nvar AnimatedNode = function () {\n  function AnimatedNode(nodeConfig, inputNodes) {\n    _classCallCheck(this, AnimatedNode);\n    _defineProperty(this, \"__nodeID\", void 0);\n    _defineProperty(this, \"__lastLoopID\", {\n      \"\": -1\n    });\n    _defineProperty(this, \"__memoizedValue\", {\n      \"\": null\n    });\n    _defineProperty(this, \"__children\", []);\n    this.__nodeID = ++nodeCount;\n    this.__nodeConfig = sanitizeConfig(nodeConfig);\n    this.__initialized = false;\n    this.__inputNodes = inputNodes && inputNodes.filter(function (node) {\n      return node instanceof AnimatedNode;\n    });\n  }\n  _createClass(AnimatedNode, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"AnimatedNode, id: \".concat(this.__nodeID);\n    }\n  }, {\n    key: \"__attach\",\n    value: function __attach() {\n      this.__nativeInitialize();\n      var nodes = this.__inputNodes;\n      if (nodes) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          nodes[i].__addChild(this);\n        }\n      }\n    }\n  }, {\n    key: \"__detach\",\n    value: function __detach() {\n      var nodes = this.__inputNodes;\n      if (nodes) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          nodes[i].__removeChild(this);\n        }\n      }\n      this.__nativeTearDown();\n    }\n  }, {\n    key: \"__getValue\",\n    value: function __getValue() {\n      if (!(callID in this.__lastLoopID) || this.__lastLoopID[callID] < loopID) {\n        this.__lastLoopID[callID] = loopID;\n        var result = this.__onEvaluate();\n        this.__memoizedValue[callID] = result;\n        return result;\n      }\n      return this.__memoizedValue[callID];\n    }\n  }, {\n    key: \"__forceUpdateCache\",\n    value: function __forceUpdateCache(newValue) {\n      this.__memoizedValue[callID] = newValue;\n      this.__markUpdated();\n    }\n  }, {\n    key: \"__dangerouslyRescheduleEvaluate\",\n    value: function __dangerouslyRescheduleEvaluate() {\n      this.__lastLoopID[callID] = -1;\n      this.__markUpdated();\n    }\n  }, {\n    key: \"__markUpdated\",\n    value: function __markUpdated() {\n      UPDATED_NODES.push(this);\n      if (!propUpdatesEnqueued) {\n        propUpdatesEnqueued = scheduleUpdates(runPropUpdates);\n      }\n    }\n  }, {\n    key: \"__nativeInitialize\",\n    value: function __nativeInitialize() {\n      if (!this.__initialized) {\n        ReanimatedModule.createNode(this.__nodeID, _objectSpread({}, this.__nodeConfig));\n        this.__initialized = true;\n      }\n    }\n  }, {\n    key: \"__nativeTearDown\",\n    value: function __nativeTearDown() {\n      if (this.__initialized) {\n        ReanimatedModule.dropNode(this.__nodeID);\n        this.__initialized = false;\n      }\n    }\n  }, {\n    key: \"isNativelyInitialized\",\n    value: function isNativelyInitialized() {\n      return this.__initialized;\n    }\n  }, {\n    key: \"__onEvaluate\",\n    value: function __onEvaluate() {\n      throw new Error('Missing implementation of onEvaluate');\n    }\n  }, {\n    key: \"__getProps\",\n    value: function __getProps() {\n      return this.__getValue();\n    }\n  }, {\n    key: \"__getChildren\",\n    value: function __getChildren() {\n      return this.__children;\n    }\n  }, {\n    key: \"__addChild\",\n    value: function __addChild(child) {\n      if (this.__children.length === 0) {\n        this.__attach();\n      }\n      this.__children.push(child);\n      child.__nativeInitialize();\n      if (ReanimatedModule.connectNodes) {\n        ReanimatedModule.connectNodes(this.__nodeID, child.__nodeID);\n      } else {\n        child.__dangerouslyRescheduleEvaluate();\n      }\n    }\n  }, {\n    key: \"__removeChild\",\n    value: function __removeChild(child) {\n      var index = this.__children.indexOf(child);\n      if (index === -1) {\n        console.warn(\"Trying to remove a child that doesn't exist\");\n        return;\n      }\n      if (ReanimatedModule.disconnectNodes) {\n        ReanimatedModule.disconnectNodes(this.__nodeID, child.__nodeID);\n      }\n      this.__children.splice(index, 1);\n      if (this.__children.length === 0) {\n        this.__detach();\n      }\n    }\n  }, {\n    key: \"_connectAnimatedView\",\n    value: function _connectAnimatedView(nativeViewTag) {\n      if (ReanimatedModule.connectNodeToView) {\n        ReanimatedModule.connectNodeToView(this.__nodeID, nativeViewTag);\n      } else {\n        this.__dangerouslyRescheduleEvaluate();\n      }\n    }\n  }, {\n    key: \"_disconnectAnimatedView\",\n    value: function _disconnectAnimatedView(nativeViewTag) {\n      ReanimatedModule.disconnectNodeFromView(this.__nodeID, nativeViewTag);\n    }\n  }]);\n  return AnimatedNode;\n}();\nexport { AnimatedNode as default };","map":{"version":3,"sources":["C:\\Users\\Asus\\Desktop\\sirFrancis-main\\node_modules\\react-native-reanimated\\lib\\module\\core\\AnimatedNode.js"],"names":["ReanimatedModule","UPDATED_NODES","loopID","propUpdatesEnqueued","nodeCount","callID","getCallID","setCallID","nextCallID","sanitizeConfig","config","Platform","OS","includes","Array","isArray","map","AnimatedNode","__nodeID","output","property","runPropUpdates","visitedNodes","Set","findAndUpdateNodes","node","console","warn","has","add","update","nodes","__getChildren","i","l","length","scheduleUpdates","requestAnimationFrame","setImmediate","constructor","nodeConfig","inputNodes","__nodeConfig","__initialized","__inputNodes","filter","toString","__attach","__nativeInitialize","__addChild","__detach","__removeChild","__nativeTearDown","__getValue","__lastLoopID","result","__onEvaluate","__memoizedValue","__forceUpdateCache","newValue","__markUpdated","__dangerouslyRescheduleEvaluate","push","createNode","dropNode","isNativelyInitialized","Error","__getProps","__children","child","connectNodes","index","indexOf","disconnectNodes","splice","_connectAnimatedView","nativeViewTag","connectNodeToView","_disconnectAnimatedView","disconnectNodeFromView"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,gBAAP;AAAA,OAAA,QAAA;AAGA,IAAMC,aAAa,GAAG,EAAtB;AAEA,IAAIC,MAAM,GAAG,CAAb;AACA,IAAIC,mBAAmB,GAAG,IAA1B;AACA,IAAIC,SAAS,GAAG,CAAhB;AACA,IAAIC,MAAM,GAAG,EAAb;AAEA,OAAO,SAASC,SAAT,CAAA,EAAqB;EAC1B,OAAOD,MAAP;AACD;AAED,OAAO,SAASE,SAAT,CAAmBC,UAAnB,EAA+B;EACpCH,MAAM,GAAGG,UAATH;AACD;AAED,SAASI,cAAT,CAAwBC,MAAxB,EAAgC;EAC9B,IAAIC,QAAQ,CAACC,EAATD,KAAgB,KAAhBA,IAAyBA,QAAQ,CAACC,EAATD,KAAgB,SAAzCA,IAAsDA,QAAQ,CAACC,EAATD,KAAgB,OAAtEA,IAAiF,CAAC,WAAD,EAAc,QAAd,EAAwB,UAAxB,EAAoC,SAApC,EAA+C,QAA/C,CAAA,CAAyDE,QAAzD,CAAkE,OAAOH,MAAzE,CAArF,EAAuK;IACrK,OAAOA,MAAP;EACD,CAFD,MAEO,IAAII,KAAK,CAACC,OAAND,CAAcJ,MAAdI,CAAJ,EAA2B;IAChC,OAAOJ,MAAM,CAACM,GAAPN,CAAWD,cAAXC,CAAP;EACD,CAFM,MAEA,IAAIA,MAAM,YAAYO,YAAtB,EAAoC;IACzC,OAAOP,MAAM,CAACQ,QAAd;EACD,CAFM,MAEA,IAAI,OAAOR,MAAP,KAAkB,QAAtB,EAAgC;IACrC,IAAMS,MAAM,GAAG,CAAA,CAAf;IACA,KAAK,IAAMC,QAAX,IAAuBV,MAAvB,EAA+B;MAC7B,IAAIU,QAAQ,IAAIV,MAAhB,EAAwB;QACtBS,MAAM,CAACC,QAAD,CAAND,GAAmBV,cAAc,CAACC,MAAM,CAACU,QAAD,CAAP,CAAjCD;MACD;IACF;IACD,OAAOA,MAAP;EAd4B;EAiB9B,OAAOT,MAAP;AACD;AAED,SAASW,cAAT,CAAA,EAA0B;EACxB,IAAMC,YAAY,GAAG,IAAIC,GAAJ,CAAA,CAArB;EACA,IAAMC,kBAAkB,GAAGC,SAArBD,kBAAkB,CAAGC,IAAI,EAAI;IACjC,IAAI,CAACA,IAAL,EAAW;MACTC,OAAO,CAACC,IAARD,CAAa,8CAAbA,CAAAA;MACA;IACD;IAED,IAAIJ,YAAY,CAACM,GAAbN,CAAiBG,IAAjBH,CAAJ,EAA4B;MAC1B;IACD,CAFD,MAEO;MACLA,YAAY,CAACO,GAAbP,CAAiBG,IAAjBH,CAAAA;IACD;IACD,IAAI,OAAOG,IAAI,CAACK,MAAZ,KAAuB,UAA3B,EAAuC;MACrCL,IAAI,CAACK,MAALL,CAAAA,CAAAA;IACD,CAFD,MAEO;MACL,IAAMM,KAAK,GAAGN,IAAI,CAACO,aAALP,CAAAA,CAAd;MACA,IAAIM,KAAJ,EAAW;QACT,KAAK,IAAIE,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGH,KAAK,CAACI,MAA1B,EAAkCF,CAAC,GAAGC,CAAtC,EAAyCD,CAAC,EAA1C,EAA8C;UAC5CT,kBAAkB,CAACO,KAAK,CAACE,CAAD,CAAN,CAAlBT;QACD;MACF;IACF;EACF,CArBD;EAsBA,KAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhC,aAAa,CAACkC,MAAlC,EAA0CF,CAAC,EAA3C,EAA+C;IAC7C,IAAMR,IAAI,GAAGxB,aAAa,CAACgC,CAAD,CAA1B;IACAT,kBAAkB,CAACC,IAAD,CAAlBD;EACD;EACDvB,aAAa,CAACkC,MAAdlC,GAAuB,CA5BC;EA6BxBE,mBAAmB,GAAG,IAAtBA;EACAD,MAAM,IAAI,CAAVA;AACD;AAED,IAAMkC,eAAe,GACnBzB,QAAQ,CAACC,EAATD,KAAgB,KAAhBA,GAAwB0B,qBAAxB1B,GAAgD2B,YADlD;AAAA,IAGqBrB,YAAN;EAObsB,SAAAA,aAAYC,UAAD,EAAaC,UAAb,EAAyB;IAAA,eAAA,OAAA,YAAA;IAAA,eAAA,CAAA,IAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA;IAAA,eAAA,CAAA,IAAA,EAAA,cAAA,EAJrB;MAAE,EAAA,EAAI,CAAC;IAAP,CAIqB,CAAA;IAAA,eAAA,CAAA,IAAA,EAAA,iBAAA,EAHlB;MAAE,EAAA,EAAI;IAAN,CAGkB,CAAA;IAAA,eAAA,CAAA,IAAA,EAAA,YAAA,EAFvB,EAEuB,CAAA;IAClC,IAAA,CAAKvB,QAAL,GAAgB,EAAEd,SAAlB;IACA,IAAA,CAAKsC,YAAL,GAAoBjC,cAAc,CAAC+B,UAAD,CAAlC;IACA,IAAA,CAAKG,aAAL,GAAqB,KAArB;IACA,IAAA,CAAKC,YAAL,GACEH,UAAU,IAAIA,UAAU,CAACI,MAAXJ,CAAkBhB,UAAAA,IAAI;MAAA,OAAIA,IAAI,YAAYR,YAA1CwB;IAAAA,EADhB;EAED;EAAA,YAAA,CAAA,YAAA;IAAA,GAAA;IAAA,KAAA,EAEDK,SAAAA,SAAAA,EAAW;MACT,OAAA,oBAAA,CAAA,MAAA,CAA4B,IAAA,CAAK5B,QAAjC,CAAA;IACD;EAAA;IAAA,GAAA;IAAA,KAAA,EAED6B,SAAAA,SAAAA,EAAW;MACT,IAAA,CAAKC,kBAAL,CAAA,CAAA;MAEA,IAAMjB,KAAK,GAAG,IAAA,CAAKa,YAAnB;MAEA,IAAIb,KAAJ,EAAW;QACT,KAAK,IAAIE,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGH,KAAK,CAACI,MAA1B,EAAkCF,CAAC,GAAGC,CAAtC,EAAyCD,CAAC,EAA1C,EAA8C;UAC5CF,KAAK,CAACE,CAAD,CAALF,CAASkB,UAATlB,CAAoB,IAApBA,CAAAA;QACD;MACF;IACF;EAAA;IAAA,GAAA;IAAA,KAAA,EAEDmB,SAAAA,SAAAA,EAAW;MACT,IAAMnB,KAAK,GAAG,IAAA,CAAKa,YAAnB;MAEA,IAAIb,KAAJ,EAAW;QACT,KAAK,IAAIE,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGH,KAAK,CAACI,MAA1B,EAAkCF,CAAC,GAAGC,CAAtC,EAAyCD,CAAC,EAA1C,EAA8C;UAC5CF,KAAK,CAACE,CAAD,CAALF,CAASoB,aAATpB,CAAuB,IAAvBA,CAAAA;QACD;MACF;MAED,IAAA,CAAKqB,gBAAL,CAAA,CAAA;IACD;EAAA;IAAA,GAAA;IAAA,KAAA,EAEDC,SAAAA,WAAAA,EAAa;MACX,IAAI,EAAEhD,MAAM,IAAI,IAAA,CAAKiD,YAAjB,CAAA,IAAkC,IAAA,CAAKA,YAAL,CAAkBjD,MAAlB,CAAA,GAA4BH,MAAlE,EAA0E;QACxE,IAAA,CAAKoD,YAAL,CAAkBjD,MAAlB,CAAA,GAA4BH,MAA5B;QACA,IAAMqD,MAAM,GAAG,IAAA,CAAKC,YAAL,CAAA,CAAf;QACA,IAAA,CAAKC,eAAL,CAAqBpD,MAArB,CAAA,GAA+BkD,MAA/B;QACA,OAAOA,MAAP;MACD;MACD,OAAO,IAAA,CAAKE,eAAL,CAAqBpD,MAArB,CAAP;IACD;EAAA;IAAA,GAAA;IAAA,KAAA,EAEDqD,SAAAA,mBAAmBC,QAAD,EAAW;MAC3B,IAAA,CAAKF,eAAL,CAAqBpD,MAArB,CAAA,GAA+BsD,QAA/B;MACA,IAAA,CAAKC,aAAL,CAAA,CAAA;IACD;EAAA;IAAA,GAAA;IAAA,KAAA,EAEDC,SAAAA,gCAAAA,EAAkC;MAChC,IAAA,CAAKP,YAAL,CAAkBjD,MAAlB,CAAA,GAA4B,CAAC,CAA7B;MACA,IAAA,CAAKuD,aAAL,CAAA,CAAA;IACD;EAAA;IAAA,GAAA;IAAA,KAAA,EAEDA,SAAAA,cAAAA,EAAgB;MACd3D,aAAa,CAAC6D,IAAd7D,CAAmB,IAAnBA,CAAAA;MACA,IAAI,CAACE,mBAAL,EAA0B;QACxBA,mBAAmB,GAAGiC,eAAe,CAACf,cAAD,CAArClB;MACD;IACF;EAAA;IAAA,GAAA;IAAA,KAAA,EAED6C,SAAAA,mBAAAA,EAAqB;MACnB,IAAI,CAAC,IAAA,CAAKL,aAAV,EAAyB;QACvB3C,gBAAgB,CAAC+D,UAAjB/D,CAA4B,IAAA,CAAKkB,QAAjClB,EAAAA,aAAAA,CAAAA,CAAAA,CAAAA,EAAgD,IAAA,CAAK0C,YAArD1C,CAAAA,CAAAA;QACA,IAAA,CAAK2C,aAAL,GAAqB,IAArB;MACD;IACF;EAAA;IAAA,GAAA;IAAA,KAAA,EAEDS,SAAAA,iBAAAA,EAAmB;MACjB,IAAI,IAAA,CAAKT,aAAT,EAAwB;QACtB3C,gBAAgB,CAACgE,QAAjBhE,CAA0B,IAAA,CAAKkB,QAA/BlB,CAAAA;QACA,IAAA,CAAK2C,aAAL,GAAqB,KAArB;MACD;IACF;EAAA;IAAA,GAAA;IAAA,KAAA,EAEDsB,SAAAA,sBAAAA,EAAwB;MACtB,OAAO,IAAA,CAAKtB,aAAZ;IACD;EAAA;IAAA,GAAA;IAAA,KAAA,EAEDa,SAAAA,aAAAA,EAAe;MACb,MAAM,IAAIU,KAAJ,CAAU,sCAAV,CAAN;IACD;EAAA;IAAA,GAAA;IAAA,KAAA,EAEDC,SAAAA,WAAAA,EAAa;MACX,OAAO,IAAA,CAAKd,UAAL,CAAA,CAAP;IACD;EAAA;IAAA,GAAA;IAAA,KAAA,EAEDrB,SAAAA,cAAAA,EAAgB;MACd,OAAO,IAAA,CAAKoC,UAAZ;IACD;EAAA;IAAA,GAAA;IAAA,KAAA,EAEDnB,SAAAA,WAAWoB,KAAD,EAAQ;MAChB,IAAI,IAAA,CAAKD,UAAL,CAAgBjC,MAAhB,KAA2B,CAA/B,EAAkC;QAChC,IAAA,CAAKY,QAAL,CAAA,CAAA;MACD;MACD,IAAA,CAAKqB,UAAL,CAAgBN,IAAhB,CAAqBO,KAArB,CAAA;MACAA,KAAK,CAACrB,kBAANqB,CAAAA,CAAAA;MAEA,IAAIrE,gBAAgB,CAACsE,YAArB,EAAmC;QACjCtE,gBAAgB,CAACsE,YAAjBtE,CAA8B,IAAA,CAAKkB,QAAnClB,EAA6CqE,KAAK,CAACnD,QAAnDlB,CAAAA;MACD,CAFD,MAEO;QACLqE,KAAK,CAACR,+BAANQ,CAAAA,CAAAA;MACD;IACF;EAAA;IAAA,GAAA;IAAA,KAAA,EAEDlB,SAAAA,cAAckB,KAAD,EAAQ;MACnB,IAAME,KAAK,GAAG,IAAA,CAAKH,UAAL,CAAgBI,OAAhB,CAAwBH,KAAxB,CAAd;MACA,IAAIE,KAAK,KAAK,CAAC,CAAf,EAAkB;QAChB7C,OAAO,CAACC,IAARD,CAAa,6CAAbA,CAAAA;QACA;MACD;MAED,IAAI1B,gBAAgB,CAACyE,eAArB,EAAsC;QACpCzE,gBAAgB,CAACyE,eAAjBzE,CAAiC,IAAA,CAAKkB,QAAtClB,EAAgDqE,KAAK,CAACnD,QAAtDlB,CAAAA;MACD;MAED,IAAA,CAAKoE,UAAL,CAAgBM,MAAhB,CAAuBH,KAAvB,EAA8B,CAA9B,CAAA;MACA,IAAI,IAAA,CAAKH,UAAL,CAAgBjC,MAAhB,KAA2B,CAA/B,EAAkC;QAChC,IAAA,CAAKe,QAAL,CAAA,CAAA;MACD;IACF;EAAA;IAAA,GAAA;IAAA,KAAA,EAEDyB,SAAAA,qBAAqBC,aAAD,EAAgB;MAClC,IAAI5E,gBAAgB,CAAC6E,iBAArB,EAAwC;QACtC7E,gBAAgB,CAAC6E,iBAAjB7E,CAAmC,IAAA,CAAKkB,QAAxClB,EAAkD4E,aAAlD5E,CAAAA;MACD,CAFD,MAEO;QACL,IAAA,CAAK6D,+BAAL,CAAA,CAAA;MACD;IACF;EAAA;IAAA,GAAA;IAAA,KAAA,EAEDiB,SAAAA,wBAAwBF,aAAD,EAAgB;MACrC5E,gBAAgB,CAAC+E,sBAAjB/E,CAAwC,IAAA,CAAKkB,QAA7ClB,EAAuD4E,aAAvD5E,CAAAA;IACD;EAAA;EAAA,OAAA,YAAA;AAAA;AAAA,SA7IkBiB,YAAN,IAAA,OAAA","sourcesContent":["import ReanimatedModule from '../ReanimatedModule';\nimport { Platform } from 'react-native';\n\nconst UPDATED_NODES = [];\n\nlet loopID = 1;\nlet propUpdatesEnqueued = null;\nlet nodeCount = 0;\nlet callID = \"\";\n\nexport function getCallID() {\n  return callID;\n}\n\nexport function setCallID(nextCallID) {\n  callID = nextCallID;\n}\n\nfunction sanitizeConfig(config) {\n  if (Platform.OS === 'web' || Platform.OS === 'windows' || Platform.OS === 'macos' || ['undefined', 'string', 'function', 'boolean', 'number'].includes(typeof config)) {\n    return config;\n  } else if (Array.isArray(config)) {\n    return config.map(sanitizeConfig);\n  } else if (config instanceof AnimatedNode) {\n    return config.__nodeID;\n  } else if (typeof config === 'object') {\n    const output = {};\n    for (const property in config) {\n      if (property in config) {\n        output[property] = sanitizeConfig(config[property]);\n      }\n    }\n    return output;\n  }\n  // unhandled\n  return config;\n}\n\nfunction runPropUpdates() {\n  const visitedNodes = new Set();\n  const findAndUpdateNodes = node => {\n    if (!node) {\n      console.warn('findAndUpdateNodes was passed a nullish node');\n      return;\n    }\n\n    if (visitedNodes.has(node)) {\n      return;\n    } else {\n      visitedNodes.add(node);\n    }\n    if (typeof node.update === 'function') {\n      node.update();\n    } else {\n      const nodes = node.__getChildren();\n      if (nodes) {\n        for (let i = 0, l = nodes.length; i < l; i++) {\n          findAndUpdateNodes(nodes[i]);\n        }\n      }\n    }\n  };\n  for (let i = 0; i < UPDATED_NODES.length; i++) {\n    const node = UPDATED_NODES[i];\n    findAndUpdateNodes(node);\n  }\n  UPDATED_NODES.length = 0; // clear array\n  propUpdatesEnqueued = null;\n  loopID += 1;\n}\n\nconst scheduleUpdates =\n  Platform.OS === 'web' ? requestAnimationFrame : setImmediate;\n\nexport default class AnimatedNode {\n\n  __nodeID;\n  __lastLoopID = { \"\": -1 };\n  __memoizedValue = { \"\": null };\n  __children = [];\n\n  constructor(nodeConfig, inputNodes) {\n    this.__nodeID = ++nodeCount;\n    this.__nodeConfig = sanitizeConfig(nodeConfig);\n    this.__initialized = false;\n    this.__inputNodes =\n      inputNodes && inputNodes.filter(node => node instanceof AnimatedNode);\n  }\n\n  toString() {\n    return `AnimatedNode, id: ${this.__nodeID}`;\n  }\n\n  __attach() {\n    this.__nativeInitialize();\n\n    const nodes = this.__inputNodes;\n\n    if (nodes) {\n      for (let i = 0, l = nodes.length; i < l; i++) {\n        nodes[i].__addChild(this);\n      }\n    }\n  }\n\n  __detach() {\n    const nodes = this.__inputNodes;\n\n    if (nodes) {\n      for (let i = 0, l = nodes.length; i < l; i++) {\n        nodes[i].__removeChild(this);\n      }\n    }\n\n    this.__nativeTearDown();\n  }\n\n  __getValue() {\n    if (!(callID in this.__lastLoopID) || this.__lastLoopID[callID] < loopID) {\n      this.__lastLoopID[callID] = loopID;\n      const result = this.__onEvaluate();\n      this.__memoizedValue[callID] = result;\n      return result;\n    }\n    return this.__memoizedValue[callID];\n  }\n\n  __forceUpdateCache(newValue) {\n    this.__memoizedValue[callID] = newValue;\n    this.__markUpdated();\n  }\n\n  __dangerouslyRescheduleEvaluate() {\n    this.__lastLoopID[callID] = -1;\n    this.__markUpdated();\n  }\n\n  __markUpdated() {\n    UPDATED_NODES.push(this);\n    if (!propUpdatesEnqueued) {\n      propUpdatesEnqueued = scheduleUpdates(runPropUpdates);\n    }\n  }\n\n  __nativeInitialize() {\n    if (!this.__initialized) {\n      ReanimatedModule.createNode(this.__nodeID, { ...this.__nodeConfig });\n      this.__initialized = true;\n    }\n  }\n\n  __nativeTearDown() {\n    if (this.__initialized) {\n      ReanimatedModule.dropNode(this.__nodeID);\n      this.__initialized = false;\n    }\n  }\n\n  isNativelyInitialized() {\n    return this.__initialized;\n  }\n\n  __onEvaluate() {\n    throw new Error('Missing implementation of onEvaluate');\n  }\n\n  __getProps() {\n    return this.__getValue();\n  }\n\n  __getChildren() {\n    return this.__children;\n  }\n\n  __addChild(child) {\n    if (this.__children.length === 0) {\n      this.__attach();\n    }\n    this.__children.push(child);\n    child.__nativeInitialize();\n\n    if (ReanimatedModule.connectNodes) {\n      ReanimatedModule.connectNodes(this.__nodeID, child.__nodeID);\n    } else {\n      child.__dangerouslyRescheduleEvaluate();\n    }\n  }\n\n  __removeChild(child) {\n    const index = this.__children.indexOf(child);\n    if (index === -1) {\n      console.warn(\"Trying to remove a child that doesn't exist\");\n      return;\n    }\n\n    if (ReanimatedModule.disconnectNodes) {\n      ReanimatedModule.disconnectNodes(this.__nodeID, child.__nodeID);\n    }\n\n    this.__children.splice(index, 1);\n    if (this.__children.length === 0) {\n      this.__detach();\n    }\n  }\n\n  _connectAnimatedView(nativeViewTag) {\n    if (ReanimatedModule.connectNodeToView) {\n      ReanimatedModule.connectNodeToView(this.__nodeID, nativeViewTag);\n    } else {\n      this.__dangerouslyRescheduleEvaluate();\n    }\n  }\n\n  _disconnectAnimatedView(nativeViewTag) {\n    ReanimatedModule.disconnectNodeFromView(this.__nodeID, nativeViewTag);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}